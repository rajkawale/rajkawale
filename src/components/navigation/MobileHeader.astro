---
import LinkedInIcon from '../icons/LinkedInIcon';
import GithubIcon from '../icons/GithubIcon';

const currentPath = Astro.url.pathname;

const isActive = (path: string) => {
  if (path === '/') return currentPath === '/';
  return currentPath.startsWith(path);
};
---

<!-- Mobile Header: Top Bar -->
<header class="mobile-header flex md:hidden fixed top-0 left-0 w-full z-50 px-6 py-6 justify-between items-center bg-transparent">
  <!-- Left: Brand Logo -->
  <a 
    href="/" 
    id="mobile-logo"
    class="text-xl font-bold font-serif tracking-tight text-slate-100 hover:text-indigo-400 transition-opacity duration-300"
  >
    Raj Kawale
  </a>

  <!-- Right: Contact & GitHub (with scroll fade) -->
  <div id="mobile-top-right" class="flex items-center gap-4 transition-opacity duration-300">
    <a 
      href="/contact" 
      class="text-sm font-medium font-sans transition-all duration-300 ease-in-out text-gray-400 hover:text-white hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.6)]"
    >
      Contact
    </a>
    <a 
      href="https://github.com/rajkawale" 
      target="_blank" 
      rel="noopener noreferrer"
      class="text-zinc-400 hover:text-slate-100 transition-colors"
      aria-label="GitHub"
    >
      <GithubIcon client:load className="w-5 h-5" />
    </a>
  </div>
</header>

<!-- Mobile Bottom Drawer: Apple-style Center Button -->
<nav class="mobile-bottom-nav fixed bottom-6 left-1/2 -translate-x-1/2 z-50 md:hidden">
  <div class="flex items-center gap-2 px-5 py-3.5 rounded-full bg-slate-950/50 backdrop-blur-xl border border-white/10 shadow-lg shadow-indigo-500/10 overflow-hidden">
    <a 
      href="/#projects" 
      class="text-base font-medium font-sans transition-all duration-300 ease-in-out whitespace-nowrap text-gray-400 hover:text-white hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.6)]"
    >
      Work
    </a>
    <span class="text-zinc-500 text-sm pointer-events-none">|</span>
    <a 
      href="/blog" 
      class="text-base font-medium font-sans transition-all duration-300 ease-in-out whitespace-nowrap text-gray-400 hover:text-white hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.6)]"
    >
      Writing
    </a>
    <span class="text-zinc-500 text-sm pointer-events-none">|</span>
    <a 
      href="/notes" 
      class="text-base font-medium font-sans transition-all duration-300 ease-in-out whitespace-nowrap text-gray-400 hover:text-white hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.6)]"
    >
      Notes
    </a>
    <span class="text-zinc-500 text-sm mx-1 pointer-events-none">|</span>
    <a 
      href="https://www.linkedin.com/in/rajkawale/" 
      target="_blank" 
      rel="noopener noreferrer"
      class="text-zinc-400 hover:text-slate-100 hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.6)] transition-all duration-300 ease-in-out flex items-center"
      aria-label="LinkedIn"
    >
      <LinkedInIcon client:load className="w-5 h-5" />
    </a>
  </div>
</nav>

<script>
  const mobileLogo = document.getElementById('mobile-logo');
  const mobileTopRight = document.getElementById('mobile-top-right');

  // Scroll fade effect for logo and top-right elements
  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;
    
    if (scrollY > 50) {
      mobileLogo?.classList.add('opacity-0', 'pointer-events-none');
      mobileTopRight?.classList.add('opacity-0', 'pointer-events-none');
    } else {
      mobileLogo?.classList.remove('opacity-0', 'pointer-events-none');
      mobileTopRight?.classList.remove('opacity-0', 'pointer-events-none');
    }
  });
</script>

<style>
  .mobile-bottom-nav {
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
  }

  .mobile-bottom-nav > div {
    min-width: fit-content;
    touch-action: manipulation; /* Better touch handling */
    border-radius: 9999px; /* Force full rounded */
    overflow: hidden; /* Clip any rectangular artifacts */
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }

  /* Ensure text is readable and buttons are tappable */
  .mobile-bottom-nav a {
    padding: 0.25rem 0.5rem;
    min-height: 44px; /* Apple's recommended touch target size */
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  /* Responsive adjustments for smaller screens */
  @media (max-width: 375px) {
    .mobile-bottom-nav {
      bottom: 1rem;
    }

    .mobile-bottom-nav > div {
      padding: 0.75rem 1rem;
      gap: 0.5rem;
    }

    .mobile-bottom-nav a {
      font-size: 0.875rem;
      padding: 0.25rem 0.375rem;
    }

    .mobile-bottom-nav span {
      font-size: 0.75rem;
    }
  }
</style>

