---
import type { Project } from '../../domains/projects/entities';

interface Props {
  project: Project;
  size?: 'large' | 'medium' | 'small';
}

const { project, size = 'medium' } = Astro.props;

const sizeClasses = {
  large: 'col-span-1 md:col-span-2 lg:col-span-2 row-span-1 md:row-span-2',
  medium: 'col-span-1 row-span-1',
  small: 'col-span-1 row-span-1',
};

const statusColors = {
  Prototype: 'bg-purple-900/30 text-purple-300 border-purple-800',
  Live: 'bg-green-900/30 text-green-300 border-green-800',
  'Case Study': 'bg-indigo-900/30 text-indigo-300 border-indigo-800',
  'Stealth Mode': 'bg-amber-900/30 text-amber-300 border-amber-800',
  Startup: 'bg-blue-900/30 text-blue-300 border-blue-800',
};
---

<a
  href={`/projects/${project.slug}`}
  class={`project-card group relative ${sizeClasses[size]} bg-white/[0.03] backdrop-blur-xl border border-white/10 rounded-lg p-6 border-t-white/20 hover:border-white/20 hover:bg-white/[0.06] hover:shadow-indigo-500/10 transition-all duration-300 flex flex-col justify-between overflow-hidden`}
>
  <!-- Special handling for RaiTalk: Show dark mode screenshot inside dark card -->
  {project.slug === 'raitalk' && size === 'large' && project.thumbnail && (
    <div class="mb-4 -mx-6 -mt-6 overflow-hidden rounded-t-lg bg-zinc-950">
      <img
        src={project.thumbnail}
        alt={project.title}
        class="w-full h-auto object-cover"
        loading="lazy"
      />
    </div>
  )}
  
  <div class="flex-1 flex flex-col">
    <!-- Header -->
    <div class="mb-4">
      {project.slug === 'raitalk' ? (
        <!-- Special RaiTalk Layout: Tech + Empathy -->
        <div class="space-y-1">
          <h3 class="text-xl md:text-2xl font-serif font-bold text-white group-hover:text-indigo-400 transition-colors">
            {project.title}
          </h3>
          <p class="text-base font-sans font-semibold text-gray-300">
            Cognitive Emotional AI
          </p>
          <p class="text-sm font-sans italic text-gray-500">
            For your beautiful mind.
          </p>
        </div>
      ) : (
        <!-- Default Layout for Other Projects -->
        <>
          <h3 class="text-xl md:text-2xl font-serif font-bold text-slate-100 group-hover:text-indigo-400 transition-colors mb-2">
            {project.title}
          </h3>
          <p class="text-sm text-zinc-300 line-clamp-3 leading-relaxed font-sans">
            {project.description}
          </p>
        </>
      )}
    </div>

    <!-- Tech Stack (Builder Metadata - Monospace) -->
    {project.techStack && project.techStack.length > 0 && (
      <div class="flex flex-wrap gap-2 mb-4">
        {project.techStack.slice(0, 4).map((tech) => (
          <span
            class="px-2.5 py-1 text-xs font-mono font-medium bg-zinc-950/50 border border-zinc-800/50 rounded text-zinc-500"
            title={tech}
          >
            {tech}
          </span>
        ))}
        {project.techStack.length > 4 && (
          <span class="px-2.5 py-1 text-xs font-mono font-medium bg-zinc-950/50 border border-zinc-800/50 rounded text-zinc-600">
            +{project.techStack.length - 4}
          </span>
        )}
      </div>
    )}
  </div>

  <!-- Footer -->
  <div class="flex items-center justify-between mt-auto pt-4 border-t border-zinc-800/50">
    <span
      class={`px-3 py-1 rounded-full text-xs font-mono font-medium border ${statusColors[project.status]}`}
    >
      {project.status}
    </span>
    <div class="flex items-center gap-3">
      {project.demoUrl && (
        <span class="text-xs text-indigo-400 font-mono font-medium hover:underline">Live Demo</span>
      )}
      {project.repoUrl && (
        <span class="text-xs text-zinc-500 font-mono font-medium hover:text-zinc-300">Code</span>
      )}
    </div>
  </div>
</a>

